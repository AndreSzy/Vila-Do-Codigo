<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Número Feliz — exibir na tela</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;max-width:680px;margin:40px auto;padding:0 16px;line-height:1.5}
  h1{font-size:24px;margin:0 0 12px}
  .linha{display:flex;gap:10px;align-items:center;margin:10px 0 18px}
  input{padding:10px 12px;font-size:16px;width:200px}
  .caixa{background:#f7f7f8;border:1px solid #e6e6e6;border-radius:8px;padding:14px}
  .rotulo{font-weight:600;margin-bottom:6px}
  .erro{color:#b00020}
</style>
</head>
<body>
<h1>Numero Feliz</h1>

<div class="linha">
  <input id="n" type="number" min="1" step="1" placeholder="Digite um inteiro positivo">
</div>

<div class="caixa">
  <div class="rotulo">Resultado:</div>
  <div id="resultado">—</div>
</div>

<div class="caixa" style="margin-top:12px">
  <div class="rotulo">Felizes de 1 até N:</div>
  <div id="lista">—</div>
</div>

<script>
function somaQuadrados(n){
  let s=0;
  while(n>0){
    const d=n%10;
    s+=d*d;
    n=(n/10)|0;
  }
  return s;
}
function ehFeliz(n){
  const v=new Set();
  while(n!==1&&!v.has(n)){
    v.add(n);
    n=somaQuadrados(n);
  }
  return n===1;
}
const inN=document.getElementById("n");
const outRes=document.getElementById("resultado");
const outLista=document.getElementById("lista");
function atualizar(){
  const n=parseInt(inN.value,10);
  if(!Number.isInteger(n)||n<=0){
    outRes.innerHTML='<span class="erro">Digite um inteiro positivo.</span>';
    outLista.textContent="—";
    return;
  }
  outRes.textContent=ehFeliz(n)?"Feliz":"Não feliz";
  const a=[];
  for(let i=1;i<=n;i++) if(ehFeliz(i)) a.push(i);
  outLista.textContent=a.length?a.join(", "):"nenhum";
}
inN.addEventListener("input",atualizar);
</script>
</body>
</html>
